Massachusetts Institute of Technology 
6.042J/18.062J, Fall ’05: Mathematics for Computer Science 
Prof. Albert R. Meyer and Prof. Ronitt Rubinfeld 

Course Notes, Week 9 
November 2 
revised November 3, 2005, 1270 minutes 

Counting, I. 

20480135385502964448038 
489445991866915676240992 
1082662032430379651370981 
1178480894769706178994993 
1253127351683239693851327 
1301505129234077811069011 
1311567111143866433882194 
1470029452721203587686214 
1578271047286257499433886 
1638243921852176243192354 
1763580219131985963102365 
1826227795601842231029694 
1843971862675102037201420 
2396951193722134526177237 
2781394568268599801096354 
2796605196713610405408019 
2931016394761975263190347 
2933458058294405155197296 
3075514410490975920315348 
3111474985252793452860017 
3145621587936120118438701 
3148901255628881103198549 
3157693105325111284321993 

3171004832173501394113017 
3208234421597368647019265 
3437254656355157864869113 
3574883393058653923711365 
3644909946040480189969149 
3790044132737084094417246 
3870332127437971355322815 
4080505804577801451363100 
4167283461025702348124920 
4235996831123777788211249 
4670939445749439042111220 
4815379351865384279613427 
4837052948212922604442190 
5106389423855018550671530 
5142368192004769218069910 
5181234096130144084041856 
5198267398125617994391348 
5317592940316231219758372 
5384358126771794128356947 
5439211712248901995423441 
5610379826092838192760458 
5632317555465228677676044 
5692168374637019617423712 

5763257331083479647409398 
5800949123548989122628663 
6042900801199280218026001 
6116171789137737896701405 
6144868973001582369723512 
6247314593851169234746152 
6814428944266874963488274 
6870852945543886849147881 
6914955508120950093732397 
6949632451365987152423541 
7128211143613619828415650 
7173920083651862307925394 
7215654874211755676220587 
7256932847164391040233050 
7332822657075235431620317 
7426441829541573444964139 
7632198126531809327186321 
7712154432211912882310511 
7858918664240262356610010 
7898156786763212963178679 
8147591017037573337848616 
8149436716871371161932035 
8176063831682536571306791 

8247331000042995311646021 
8496243997123475922766310 
8518399140676002660747477 
8543691283470191452333763 
8675309258374137092461352 
8694321112363996867296665 
8772321203608477245851154 
8791422161722582546341091 
9062628024592126283973285 
9137845566925526349897794 
9153762966803189291934419 
9270880194077636406984249 
9324301480722103490379204 
9436090832146695147140581 
9475308159734538249013238 
9492376623917486974923202 
9511972558779880288252979 
9602413424619187112552264 
9631217114906129219461111 
9908189853102753335981319 
9913237476341764299813987 

Two different subsets of the ninety 25­digit numbers shown above have the same sum.  For exam­
ple, maybe  the sum of  the numbers  in  the ﬁrst column  is equal  to  the sum of  the numbers  in  the 
second  column.  Can you ﬁnd  two  such  subsets?  This  is a very difﬁcult  computational problem. 
But we’ll prove that such subsets must exist! This is the sort of weird conclusion one can reach by 
tricky use of counting, the topic of this chapter. 
Counting seems easy enough:  1, 2, 3, 4,  etc.  This explicit approach works well  for counting sim­
ple  things,  like your  toes,  and  for extremely  complicated  things  for which  there’s no  identiﬁable 
structure.  However, subtler methods can help you count many things in the vast middle ground, 
such as: 

•	 The  number  of  different  ways  to  select  a  dozen  doughnuts  when  there  are  ﬁve  varieties 
available. 

•	 The number of 16­bit numbers with exactly 4 ones. 

Counting is useful in computer science for several reasons: 

•	 Determining  the  time  and  storage  required  to  solve  a  computational  problem—  a  central 
objective in computer science— often comes down to solving a counting problem. 

Copyright © 2005, Prof. Albert R. Meyer. 

2	

Course Notes, Week 9: Counting, I. 

•	 Counting is the basis of probability theory, which in turn is perhaps the most important topic 
this term. 

•	 Two  remarkable  proof  techniques,  the  “pigeonhole  principle”  and  “combinatorial  proof ”, 
rely on counting. These lead to a variety of interesting and useful insights. 

We’re  going  to  present  a  lot  of  rules  for  counting.  These  rules  are  actually  theorems,  but  we’re 
generally not going to prove them.  Our objective is to teach you counting as a practical skill, like 
integration. And most of the rules seem “obvious” anyway. 

1  Counting One Thing by Counting Another 

How  do  you  count  the  number  of  people  in  a  crowded  room?  We  could  count  heads,  since  for 
each person  there  is exactly one head.  Alternatively, we could count ears and divide by  two.  Of 
course, we might have to adjust the calculation if someone lost an ear in a pirate raid or someone 
was born with  three ears.  The point here  is  that we  can often  count  one  thing  by  counting  another, 
though some fudge factors may be required. This is the central theme of counting, from the easiest 
problems to the hardest. 
In more  formal  terms,  every counting problem comes down  to determining  the size of some set. 
The size or cardinality of a set S  is the number of elements in S  and is denoted |S |.  In these terms, 
we’re  claiming  that  we  can  often  ﬁnd  the  size  of  one  set  S  by  ﬁnding  the  size  of  a  related  set  T .  We 
already  have  a  mathematical  tool  for  relating  one  set  to  another:  relations.  Not  surprisingly,  a 
particular kind of relation is at the heart of counting. 

1.1  The Bijection Rule 

If we can pair up all the girls at a dance with all the boys, then there must be an equal number of 
each. This simple observation generalizes to a powerful counting rule: 
Rule 1 (Bijection Rule).  If there exists a bijection f  : A  → B , then |A = B .
| 
|
|

In  the example, A  is  the set of boys, B  is  the set of girls, and  the function f  deﬁnes how  they are 
paired. 
The  Bijection  Rule  acts  as  a  magniﬁer  of  counting  ability;  if  you  ﬁgure  out  the  size  of  one  set, 
then you can immediately determine the sizes of many other sets via bijections. For example, let’s 
return to two sets mentioned earlier: 

A  = all ways to select a dozen doughnuts when ﬁve varieties are available 
B  = all 16­bit sequences with exactly 4 ones 

Let’s consider a particular element of set A: 
���� 
���� 
0 0	
lemon­ﬁlled 
chocolate 

0 0 0 0 0 0 � 
� 
�� 
sugar 

���� 
0 0
glazed 

���� 
0 0
plain 

Course Notes, Week 9: Counting, I. 

3 

We’ve depicted each doughnut with a 0 and  left a gap between  the different varieties.  Thus,  the 
selection above contains two chocolate doughnuts, no lemon­ﬁlled, six sugar, two glazed, and two 
plain. Now let’s put a 1 into each of the four gaps: 
���� 
���� 
���� 
���� 
� 
�� 
0 0 0 0 0 0  �  1 
0 0
1 
1 
0 0
0 0
sugar 
chocolate 
glazed 
lemon­ﬁlled 
plain 
We’ve just formed a 16­bit number with exactly 4 ones— an element of B ! 
This example suggests a bijection from set A to set B : map a dozen doughnuts consisting of: 

1

1 

to the sequence: 

c chocolate, l lemon­ﬁlled, s sugar, g glazed, and p plain 
�0 . . . 0�
�0 . . . 0�  1 
� �� � 
�0 . . . 0�  1
�0 . . . 0�  1 
�� 
�� 
�� 
�� 
0 . . . 0
s
p 
g
c 
l 
The resulting sequence always has 16 bits and exactly 4 ones, and thus is an element of B .  More­
over,  the mapping  is  a bijection;  every  such bit  sequence  is mapped  to by  exactly one order of  a 
dozen doughnuts. Therefore, |A = B by the Bijection Rule! 
| 
|
|
This demonstrates the magnifying power of the bijection rule. We managed to prove that two very 
different sets are actually the same size— even though we don’t know exactly how big either one 
is. But as soon as we ﬁgure out the size of one set, we’ll immediately know the size of the other. 
This particular bijection might seem frighteningly ingenious if you’ve not seen it before. But you’ll 
use essentially this same argument over and over, and soon you’ll consider it boringly routine. 

1.2  Sequences 

The Bijection Rule  lets us count one  thing by counting another.  This suggests a general strategy: 
get  really good at counting  just a  few  things and  then use bijections  to count  everything  else.  This 
is  the  strategy we’ll  follow.  In  particular,  we’ll  get  really  good  at  counting  sequences.  When we 
want to determine the size of some other set T , we’ll ﬁnd a bijection from T  to a set of sequences 
S .  Then we’ll use our  super­ninja  sequence­counting  skills  to determine  |S |, which  immediately 
gives  us  |T .  We’ll  need  to  hone  this  idea  somewhat  as we  go  along,  but  that’s  pretty much  the 
|
plan! 

2  Two Basic Counting Rules 

We’ll harvest our ﬁrst crop of counting problems with two basic rules. 

2.1  The Sum Rule 

Linus  allocates  his  big  sister  Lucy  a  quota  of  20  crabby  days,  40  irritable  days,  and  60  generally 
surly  days.  On  how many  days  can  Lucy  be  out­of­sorts  one way  or  another?  Let  set  C  be  her 
crabby days, I be her irritable days, and S be the generally surly.  In these terms, the answer to the 
question is  C ∪ I ∪ S . Now assuming that she is permitted at most one bad quality each day, the 
|
|
size of this union of sets is given by the Sum Rule: 

4 

Course Notes, Week 9: Counting, I. 

Rule 2 (Sum Rule).  If A1 , A2 , . . . , An  are disjoint sets, then: 
A1  ∪ A2  ∪ . . . ∪ An = A1 + A2 + . . . + An
|
|
|
|
|
|
|

| 

Thus, according to Linus’ budget, Lucy can be out­of­sorts for: 
| ∪ | | ∪ |
|
C ∪ I ∪ S
|
| 
|
= C
S
I
= 20 + 40 + 60 
= 120 days 

Notice  that  the  Sum  Rule  holds  only  for  a  union  of  disjoint  sets.  Finding  the  size  of  a  union  of 
intersecting sets is a more complicated problem that we’ll take up later. 

2.2  The Product Rule 

The product rule gives the size of a product of sets. Recall that if P1 , P2 , . . . , Pn  are sets, then 
P1  × P2  × . . . × Pn 

is the set of all sequences whose ﬁrst term is drawn from P1 , second term is drawn from P2  and so 
forth. 

Rule 3 (Product Rule).  If P1 , P2 , . . . Pn  are sets, then: 
P1  × P2  × . . . × Pn = P1
|
| 
|

| · |P2 | · · · |Pn | 

Unlike  the  sum  rule,  the  product  rule does  not  require  the  sets P1 , . . . , Pn  to  be  disjoint.  For  ex­
ample,  suppose  a  daily  diet  consists  of  a  breakfast  selected  from  set B ,  a  lunch  from  set L,  and  a 
dinner from set D : 

B = {pancakes, bacon and eggs, bagel, Doritos}
L = {burger and fries, garden salad, Doritos}
D = {macaroni, pizza, frozen burrito, pasta, Doritos} 
Then B × L × D is the set of all possible daily diets. Here are some sample elements: 

(pancakes, burger and fries, pizza) 
(bacon and eggs, garden salad, pasta) 
(Doritos, Doritos, frozen burrito) 

The Product Rule tells us how many different daily diets are possible: 
| =  |B | · |
B × L × D
|
| · |D|
L
=  4 ·
53 ·
=  60 

Course Notes, Week 9: Counting, I. 

2.3  Putting Rules Together 

5 

Few counting problems can be solved with a single rule. More often, a solution is a ﬂury of sums, 
products,  bijections,  and  other methods.  Let’s  look  at  some  examples  that  bring more  than  one 
rule into play. 

Passwords 

The  sum  and  product  rules  together  are  useful  for  solving  problems  involving  passwords,  tele­
phone numbers, and license plates.  For example, on a certain computer system, a valid password 
is  a  sequence of between  six  and  eight  symbols.  The ﬁrst  symbol must be a  letter  (which  can be 
lowercase or uppercase),  and  the  remaining symbols must be either  letters or digits.  How many 
different passwords are possible? 
Let’s deﬁne two sets, corresponding to valid symbols in the ﬁrst and subsequent positions in the 
password. 

F  =  a, b, . . . , z , A, B , . . . , Z }
{
S =  a, b, . . . , z , A, B , . . . , Z, 0, 1, . . . , 9}
{

In these terms, the set of all possible passwords is: 
(F  × S 5 ) ∪ (F  × S 6 ) ∪ (F  × S 7 ) 
Thus,  the  length­six passwords are in set F  × S 5 ,  the  length­seven passwords are in F  × S 6 , and 
the length­eight passwords are in F × S 7 .  Since these sets are disjoint, we can apply the Sum Rule 
� �

� �

� �

� �

� �

� �

� �

� �

and count the total number of possible passwords as follows: 
(F  × S 5 ) ∪ (F  × S 6 ) ∪ (F  × S 7 ) 
=
 F  ×
 S 5  +
 F ×
 S 6  +
 F  ×
 S 7 
=  |F | · |S | 5  +  F
|
| · |S | 6  +  |F | · |
| 
S 7
·
·
·
=  52  625  +  52  626  +  52  627 
≈ 1.8 1014  different passwords 
·

Sum Rule 
Product Rule 

Subsets of an n­element Set 
How many different subsets of an n element set X are there? For example, the set X =  x1 , x2 , x3}
{
has eight different subsets: 

{}
{
x1} 
x2} 
{
{x3} {x1 , x3} {x2 , x3} {

{
x1 , x2}
x1 , x2 , x3}

There is a natural bijection from subsets of X to n­bit sequences. Let x1 , x2 , . . . , xn  be the elements 
of X .  Then a particular subset of X  maps  to  the sequence (b1 , . . . , bn ) where bi  = 1  if and only  if 
xi  is  in  that  subset.  For  example,  if  n  =  10,  then  the  subset  {x2 , x3 , x5 , x7 , x10} maps  to  a  10­bit 
sequence as follows: 

subset: 
sequence: 

{
(  0, 

x2 , x3 ,
1, 
1,  0, 

x5 ,
1,  0, 

x7 ,
1,  0,  0, 

x10  }
1 
) 

6 

Course Notes, Week 9: Counting, I. 

We  just used a bijection  to  transform  the original problem  into a question about  sequences—  ex­
actly  according  to  plan!  Now  if we  answer  the  sequence question,  then we’ve  solved our  original 
problem as well. 
But  how  many  different  n­bit  sequences  are  there?  For  example,  there  are  8  different  3­bit  se­
quences: 

(0, 0, 0) 
(1, 0, 0) 

(0, 0, 1) 
(1, 0, 1) 

(0, 1, 0) 
(1, 1, 0) 

(0, 1, 1) 
(1, 1, 1) 

Well, we can write the set of all n­bit sequences as a product of sets: 
�� 
� 
{0, 1} × {0, 1} × . . . × {0, 1}� 
{0, 1} 
n
n  terms 
Then Product Rule gives the answer: 

=

|{0, 1} | 
n

|{0, 1}| 
n
=
= 2n 

This means  that  the number of subsets of an n­element set X  is also 2n  .  We’ll put  this answer  to 
use shortly. 

3  More Functions:  Injections and Surjections 

Bijections are both injective and surjective, which makes them a powerful tool for exact counting. 
We’ve  observed  in  earlier Notes  that  surjections  and  injections  by  themselves  imply  certain  size 
relationships between sets: 

Rule 4 (Mapping Rule). 
1.  If f  :  X  → Y  is surjective, then |X
|
| ≥ |
Y .
|
| ≤ |
2.  If f  :  X  → Y  is injective, then |X
Y .
3.  If f  :  X  → Y  is bijective, then |X =  Y .
|
| 
|

3.1  The Pigeonhole Principle 

Here is an old puzzle: 

A  drawer  in  a  dark  room  contains  red  socks,  green  socks,  and  blue  socks.  How 
many socks must you withdraw to be sure that you have a matching pair? 

For  example,  picking  out  three  socks  is not  enough;  you might  end up with  one  red,  one  green, 
and  one  blue.  The  solution  relies  on  the  Pigeonhole  Principle,  which  is  a  friendly  name  for  the 
contrapositive of part (2) of the Mapping Rule. Let’s write it down: 

Course Notes, Week 9: Counting, I. 
|
If |X > Y 
|
|

→ 
, then no function f  :  X Y  is injective. 

7 

And now rewrite it again to eliminate the word “injective.” 
Rule 5  (Pigeonhole Principle).  If  |X >  |Y  ,  then  for every  function f  :  X
|
|
different elements of X  that are mapped to the same element of Y  . 

→

Y   ,  there exist  two 

Perhaps  the  relevance  of  this  abstract mathematical  statement  to  selecting  footwear  under  poor 
lighting  conditions  is  not  obvious.  However,  let A  be  the  set  of  socks  you  pick  out,  let B  be  the 
set of colors available,  and  let f  map each sock  to  its color.  The Pigeonhole Principle says  that  if 
|A > B = 3,  then at least two elements of A  (that is, at least two socks) must be mapped to the 
| 
|
|
same element of B  (that  is,  the  same color).  For example, one possible mapping of  four  socks  to 
three colors is shown below. 

f

B 
A 
- red 
1st sock 
- green 
2nd sock 
3  
 - blue
3rd sock 
  
4th sock 

Therefore, four socks are enough to ensure a matched pair. 

Not surprisingly, the pigeonhole principle is often described in terms of pigeons: 

If every pigeon ﬂies into a pigeonhole, and there are more pigeons than holes, then at least two 
pigeons must ﬂy into some hole. 

In  this  case,  the pigeons  form  set A,  the pigeonholes  are  set B ,  and  f  describes which hole  each 
pigeon ﬂies into. 

Mathematicians  have  come  up  with  many  ingenious  applications  for  the  pigeonhole  principle. 
If  there  were  a  cookbook  procedure  for  generating  such  arguments,  we’d  give  it  to  you.  Un­
fortunately,  there  isn’t  one.  One  helpful  tip,  though:  when  you  try  to  solve  a  problem with  the 
pigeonhole principle, the key is to clearly identify three things: 

1.  The set A  (the pigeons). 

2.  The set B  (the pigeonholes). 

3.  The function f  (the rule for assigning pigeons to pigeonholes). 

8 

Hairs on Heads 

Course Notes, Week 9: Counting, I. 

There are a number of generalizations of the pigeonhole principle.  For example: 
Rule 6 (Generalized Pigeonhole Principle).  If |X > k ·  Y , then every function f  :  X → Y  maps
| 
|
|
at least k +  1  different elements of X to the same element of Y . 

For  example,  if  you  pick  two  people  at  random,  surely  they  are  extremely  unlikely  to  have  ex­
actly  the  same number  of hairs  on  their heads.  However,  in  the  remarkable  city  of Boston, Mas­
sachusetts there are actually three people who have exactly the same number of hairs!  Of course, 
there are many bald people in Boston, and they all have zero hairs.  But we’re talking about non­
bald people. 
Boston has about 500,000 non­bald peole,  and  the number of hairs on a person’s head  is at most 
200,000.  Let A be the set of non­bald people  in Boston,  let B  =  {1, . . . , 200, 000}, and  let f  map a 
person  to  the number of hairs on his or her head.  Since  |A >  2 B ,  the Generalized Pigeonhole 
| 
|
|
Principle implies that at least three people have exactly the same number of hairs. We don’t know 
who they are, but we know they exist! 

Subsets with the Same Sum 

We asserted that two different subsets of the ninety 25­digit numbers listed on the ﬁrst page have 
the same sum.  This actually  follows  from  the Pigeonhole Principle.  Let A be  the collection of all 
subsets of the 90 numbers  in the  list.  Now the sum of any subset of numbers  is at most 90  · 1025  , 
� 
� 
since there are only 90 numbers and every 25­digit number is less than 1025 .  So let B be the set of 
· 
integers  0, 1, . . . , 90  1025  
, and let f  map each subset of numbers (in A) to its sum (in B ).
We proved that an n­element set has 2n  different subsets. Therefore: 
A| = 290
|
≥ 1.237  × 1027 

On the other hand: 

|B =  90  1025  +  1 
|
· 
≤ 0.901  × 1027 
Both quantities are enormous, but |A is a bit greater than  B . This means that f maps at least two 
|
| 
|
elements of A to the same element of B .  In other words, by the Pigeonhole Principle, two different 
subsets must have the same sum! 
Notice  that  this  proof  gives  no  indication  which  two  sets  of  numbers  have  the  same  sum.  This 
frustrating variety of argument is called a nonconstructive proof . 

4  The Generalized Product Rule 

We  realize  everyone  has  been  working  pretty  hard  this  term,  and  we’re  considering  awarding 
some prizes for truly exceptional coursework. Here are some possible categories: 

Course Notes, Week 9: Counting, I. 

9 

Sets with Distinct Subset Sums 

How can we construct a set of n positive integers such that all its subsets have distinct 
sums? One way is to use powers of two: 
{1, 2, 4, 8, 16} 

This approach is so natural that one suspects all other such sets must involve larger num­
bers.  (For example, we could safely replace 16 by 17, but not by 15.) Remarkably, there are 
examples involving smaller numbers. Here is one: 
{6, 9, 11, 12, 13} 

One of the top mathematicans of the century, Paul Erd ˝os, conjectured in 1931 that there are 
no  such  sets  involving  signiﬁcantly  smaller  numbers.  More  precisely,  he  conjectured  that 
the largest number must be > c2n  for some constant c > 0. He offered $500 to anyone who 
could prove or disprove his conjecture, but the problem remains unsolved. 

Best Administrative Critique  We asserted that the quiz was closed­book. On the cover page, one 
strong candidate for this award wrote, “There is no book.” 

Awkward Question Award  “Okay,  the  left  sock,  right  sock,  and  pants  are  in  an  antichain,  but 
how— even with assistance— could I put on all three at once?” 

Best Collaboration Statement  Inspired by a student who wrote “I worked alone” on Quiz 1. 

In how many ways can, say, three different prizes be awarded to n people? This is easy to answer 
using our startegy of  translating  the problem about awards  into a problem about sequences.  Let 
P  be the set of n people in 6.042.  Then there is a bijection from ways of awarding the three prizes 
to the set P 3  ::=  P × P  × P .  In particular, the assignment: 
� �

� �

“person x wins prize #1, y wins prize #2, and z wins prize #3” 
|  =  n
|

3 
maps  to  the  sequence  (x, y , z ).  By  the  Product  Rule,  we  have 
=  P

P 3 
ways to award the prizes to a class of n people. 
But what  if  the  three prizes must be awarded  to different  students?  As before, we could map  the 
assignment 

3 ,  so  there  are  n

3 

“person x wins prize #1, y wins prize #2, and z wins prize #3” 
to  the  triple (x, y , z )  ∈  P 3 .  But  this  function  is no  longer a bijection.  For example, no valid assign­
ment maps to the triple (Dave, Dave, Becky) because Dave is not allowed to receive two awards. 
�

�

However, there is a bijection from prize assignments to the set: 
(x, y , z ) ∈ P 3  x, y , and z are different people 
|

S =


10 

Course Notes, Week 9: Counting, I. 

This reduces the original problem to a problem of counting sequences. Unfortunately, the Product 
Rule  is of no help  in counting sequences of  this  type because  the entries depend on one another; 
in particular, they must all be different. However, a slightly sharper tool does the trick. 
Rule 7 (Generalized Product Rule).  Let S   be a set of length­k  sequences.  If there are: 

•  n1  possible ﬁrst entries, 

•  n2  possible second entries for each ﬁrst entry, 

•  n3  possible third entries for each combination of ﬁrst and second entries, etc. 

then: 

|
| 
S =  n1 

· n2  · n3  · · ·

nk

In the awards example, S  consists of sequences (x,  y , z ). There are n  ways to choose x, the recipient 
of  prize  #1.  For  each  of  these,  there  are  n  − 1  ways  to  choose  y ,  the  recipient  of  prize  #2,  since 
everyone except for person x  is eligible.  For each combination of x  and y , there are n  − 2  ways to 
choose z , the recipient of prize #3, because everyone except for x  and y  is eligible. Thus, according 
to the Generalized Product Rule, there are 
S =  n  · (n  − 1)  · (n  − 2)
|
| 
ways to award the 3 prizes to different people. 

4.1  Defective Dollars 

A dollar  is defective some digit appears more  than once  in  the 8­digit serial number.  If you check 
your  wallet,  you’ll  be  sad  to  discover  that  defective  dollars  are  all­too­common.  In  fact,  how 
common  are  nondefective  dollars?  Assuming  that  the  digit  portions  of  serial  numbers  all  occur 
equally often, we could answer this question by computing: 

fraction dollars that are nondefective = 

# of serial #’s with all digits different 
total # of serial #’s 
Let’s ﬁrst  consider  the denominator.  Here  there are no  restrictions;  there are are 10 possible ﬁrst 
digits, 10 possible second digits, 10 third digits, and so on. Thus, the total number of 8­digit serial 
numbers is 108  by the Product Rule. 
Next,  let’s  turn  to  the  numerator.  Now we’re  not  permitted  to  use  any  digit  twice.  So  there  are 
still 10 possible ﬁrst digits, but only 9 possible second digits, 8 possible third digits, and so forth. 
Thus, by the Generalized Product Rule, there are 
·
·
·
·
·
·
·
10 9 8 7 6 5 4 3  = 

10!
2 
= 1, 814, 400 

serial numbers with all digits different. Plugging these results into the equation above, we ﬁnd: 
1, 814, 400
100, 000, 000 
= 1.8144% 

fraction dollars that are nondefective = 

Course Notes, Week 9: Counting, I. 

4.2  A Chess Problem 

11 

In how many different ways can we place a pawn (p), a knight (k), and a bishop (b) on a chessboard 
so that no two pieces share a row or a column?  A valid conﬁguration is shown below on the left, 
and an invalid conﬁguration is shown on the right. 

k 

b 

p 

valid 

p 

b 

k 

invalid 

First, we map this problem about chess pieces to a question about sequences.  There is a bijection 
from conﬁgurations to sequences 

(rp , cp , rk , ck , rb , cb ) 
where rp , rk , and rb  are distinct rows and cp , ck , and cb  are distinct columns.  In particular, rp  is the 
pawn’s row, cp  is the pawn’s column, rk  is the knight’s row, etc. Now we can count the number of 
such sequences using the Generalized Product Rule: 
• rp  is one of 8 rows 
• cp  is one of 8 columns 
• rk  is one of 7 rows (any one but rp ) 
• ck  is one of 7 columns (any one but cp ) 
• rb  is one of 6 rows (any one but rp  or rk ) 
• cb  is one of 6 columns (any one but cp  or ck ) 
Thus, the total number of conﬁgurations is (8  7 · 6)2  .
·

4.3  Permutations 

A permutation of a set S is a sequence that contains every element of S exactly once. For example, 
here are all the permutations of the set {a, b, c}: 
(a, c, b) 
(a, b, c) 
(b, c, a) 
(c, a, b) 

(b, a, c) 
(c, b, a) 

How  many  permutations  of  an  n­element  set  are  there?  Well,  there  are  n  choices  for  the  ﬁrst 
element.  For  each  of  these,  there  are n − 1  remaining  choices  for  the  second  element.  For  every 
combination  of  the  ﬁrst  two  elements,  there  are  n − 2  ways  to  choose  the  third  element,  and  so 
forth. Thus, there are a total of 

n · (n − 1)  · (n − 2)

· · ·

·
·
3 2 1 =  n!

12 

Course Notes, Week 9: Counting, I. 

permutations of an n­element set.  In particular, this formula says that there are 3!   = 6 permuations 
of the 3­element set {a,  b,  c}, which is the number we found above. 
Permutations will come up again in this course approximately 1.6 bazillion times.  In fact, permu­
� �
tations are the reason why factorial comes up so often and why we taught you Stirling’s approxi­
√
mation: 
n!   ∼
n  n 
e 

2πn 

5  The Division Rule 

We can count the number of people in a room by counting ears and dividing by two. Or we could 
count the number of ﬁngers and divide by 10.  Or we could count the number of ﬁngers and toes 
and divide by 20.  (Someone is probably short a ﬁnger or has an extra ear, but let’s not worry about 
that right now.) These observations lead to an important counting rule. 
A  k­to­1  function  maps  exactly  k  elements  of  the  domain  to  every  element  of  the  range.  For 
example, the function mapping each ear to its owner is 2­to­1: 

- person A 
ear 1 
3
 PPPPPP
ear 2 
 
q  person B 
ear 3  
 
�
�
ear 4 
PPPPPP
� 
� q- person C 
ear 5 
� 
ear 6  � 

Similarly, the function mapping each ﬁnger to its owner is 10­to­1. And the function maping each 
each ﬁnger or toe to its owner is 20­to­1. Now just as a bijection implies two sets are the same size, 
a k­to­1 function implies that the domain is k  times larger than the domain: 
Rule 8 (Division Rule).  If f  :  A  → B  is k­to­1, then |A =  k B |.
| 
· |

Suppose A  is the set of ears in the room and B  is the set of people.  Since we know there is a 2­to­1 
mapping from ears to people, the Division Rule says that |A = 
B | or, equivalently,  B =  A /2.
| 
2 · |
|
|
|
|
Thus, the number of people is half the number of ears. 
Now  this might seem  like a stupid way  to count people.  But,  surprisingly, many counting prob­
lems are made much easier by initially counting every item multiple times and then correcting the 
answer using the Division Rule. Let’s look at some examples. 

5.1  Another Chess Problem 

In  how many  different ways  can  you  place  two  identical  rooks  on  a  chessboard  so  that  they  do 
not  share  a  row  or  column?  A  valid  conﬁguration  is  shown  below  on  the  left,  and  an  invalid 

Course Notes, Week 9: Counting, I. 

conﬁguration is shown on the right. 

r 

13 

r 

valid 

r 

r 

invalid 

Let A be the set of all sequences 

(r1 , c1 , r2 , c2 ) 

where r1  and r2  are distinct rows and c1  and c2  are distinct columns.  Let B be the set of all valid 
rook  conﬁgurations.  There  is  a  natural  function  f  from  set A to  set B ;  in  particular,  f  maps  the 
sequence (r1 , c1 , r2 , c2 ) to a conﬁguration with one rook in row r1 , column c1  and the other rook in 
row r2 , column c2 . 

But now there’s a snag. Consider the sequences: 

(1, 1, 8, 8) 

and 

(8, 8, 1, 1) 

The  ﬁrst  sequence  maps  to  a  conﬁguration  with  a  rook  in  the  lower­left  corner  and  a  rook  in 
the  upper­right  corner.  The  second  sequence maps  to  a  conﬁguration with  a  rook  in  the  upper­
right corner and a rook in the lower­left corner.  The problem is that those are two different ways 
of  describing  the  same  conﬁguration!  In  fact,  this  arrangement  is  shown  on  the  left  side  in  the 
diagram above. 

More generally,  the  function f  map exactly  two sequences  to  every board conﬁguration;  that  is f 
is a 2­to­1 function. Thus, by the quotient rule, |A = 2 · |B . Rearranging terms gives: 
|
|
|A|
2 
(8  · 7)2 
2 

|B = 
| 

= 

On  the  second  line, we’ve  computed  the  size  of A using  the General  Product Rule  just  as  in  the 
earlier chess problem. 

5.2  Knights of the Round Table 

In  how  many  ways  can  King  Arthur  seat  n  different  knights  at  his  round  table?  Two  seatings 
are  considered  equivalent  if  one  can  be  obtained  from  the  other  by  rotation.  For  example,  the 
following two arrangements are equivalent: 

14 

Course Notes, Week 9: Counting, I.

# 
# 
k1 
k3
"!  k2 "! 
k4
k2 
k1 
k3 

k4 

Let A be  all  the permutations of  the knights,  and  let B be  the  set of  all possible  seating  arrange­
ments at the round table. We can map each permutaton in set A to a circular seating arrangement 
in  set  B  by  seating  the  ﬁrst  knight  in  the  permutation  anywhere,  putting  the  second  knight  to 
his  left,  the  third  knight  to  the  left  of  the  second,  and  so  forth  all  the way  around  the  table.  For 
example: 
k2# 
k4"! 
k1 

(k2 , k4 , k1 , k3 ) 

−→ 

k3 

This mapping  is  actually  an  n­to­1  function  from  A to  B ,  since  all  n  cyclic  shifts  of  the  original 
sequence map to the same seating arrangement.  In the example, n = 4 different sequences map to 
the same seating arranement: 
(k2 , k4 , k1 , k3 )  # 
k2
−→  "! 
(k4 , k1 , k3 , k2 ) 
k4
k3 
(k1 , k3 , k2 , k4 ) 
(k3 , k2 , k4 , k1 ) 
k1 

Therefore, by the division rule, the number of circular seating arrangements is: 
| A|
n 
n! 
= 
n 
= (n − 1)! 
Note that | A =  n!  since there are n!  permutations of n knights.
| 

| B = 
| 

6  Inclusion­Exclusion 

How big is a union of sets? For example, suppose there are 60 Math majors, 200 EECS majors, and 
40  Physics majors.  How many  students  are  there  in  these  three  departments?  Let M  be  the  set 

Course Notes, Week 9: Counting, I. 

15 

of Math majors, E  be  the set of EECS majors, and P  be  the set of Physics majors.  In  these  terms, 
we’re asking for  M  ∪ E  ∪ P .
|
|
The Sum Rule says that the size of union of disjoint sets is the sum of their sizes: 
| 
M  ∪ E  ∪ P = |M + E + P
|
| 
|
|
|
|

(if M , E , and P  are disjoint) 

However,  the  sets  M ,  E ,  and  P  might  not  be  disjoint.  For  example,  there  might  be  a  student 
majoring  in  both Math  and  Physics.  Such  a  student  would  be  counted  twice  on  the  right  sides 
of  this equation,  once as an  element of M  and once as an  element of P .  Worse,  there might be a 
triple­major counting three times on the right side! 

Our last counting rule determines the size of a union of sets that are not necessarily disjoint. Before 
we state the rule, let’s build some intuition by considering some easier special cases: unions of just 
two or three sets. 

6.1  Union of Two Sets 

For two sets, S1  and S2 , the Inclusion­Exclusion rule is that the size of their union is: 
S1  ∪ S2 = |S1 + S2
|
| 
|
|
S1  ∩ S2
| − |
| 

(1)

Intuitively,  each  element  of  S1  is  accounted  for  in  the  ﬁrst  term,  and  each  element  of  S2  is  ac­
counted  for  in  the  second  term.  Elements  in  both S1  and S2  are  counted  twice—  once  in  the ﬁrst 
term and once in the second. This double­counting is corrected by the ﬁnal term. 
We can prove equation (1) rigorously by applying the Sum Rule to some disjoint subsets of S1 ∪ S2 . 
As a ﬁrst step, we observe that given any two sets, S,  T , we can decompose S  into the disjoint sets 
consisting of those elements in S  but not T , and those elements in S  and also in T . That is, S  is the 
union of the disjoint sets S  − T  and S  ∩ T .  So by the Sum Rule we have 
|S | = |S  − T | + |S  ∩ T | , 
|S  − T | = |S | − |S  ∩ T | . 
Now we decompose S1  ∪ S2  into three disjoint sets: 
S1  ∪ S2  = (S1  − S2 ) ∪ (S2  − S1 ) ∪ (S1  ∩ S2 ). 

and so 

(2) 

(3) 

Now we have 
S1  ∪ S2 = (S1  − S2 ) ∪ (S2  − S1 ) ∪ (S1  ∩ S2 )
|
|
|
| 
= S1  − S2 + S2  − S1 + S1  ∩ S2
|
|
|
|
|
|
S1  ∩ S2 ) + ( S2
| − |
= (|S1
S1  ∩ S2 ) + S1  ∩ S2
| − |
|
|
|
|
= |S1 + S2
| 
S1  ∩ S2
| − |
| 
|

| 

(by (3))
(Sum Rule) 
(by (2))
(algebra)

16 	

6.2  Union of Three Sets 

Course Notes, Week 9: Counting, I. 

So  how many  students  are  there  in  the Math,  EECS,  and  Physics  departments?  In  other words, 
what is  M ∪ E ∪ P if:
|
| 

|M =  60 
| 
|E =  200 
| 
|P | =  40 

The size of a union of three sets is given by a more complicated Inclusion­Exclusion formula: 
S1  ∪ S2  ∪ S3 = |S1 + S2 + S3
|
|
|	
|
|
|
|
S1  ∩ S3
S1  ∩ S2
− |
| − |
+ S1  ∩ S2  ∩ S3
|
| 

S2  ∩ S3
| − |

|

Remarkably,  the expression on  the right accounts  for each element  in  the union of S1 , S2 , and S3 
exactly once.  For example, suppose that x is an element of all three sets.  Then x is counted three 
times (by the  S1 |,  |S2 , and  S3 terms), subtracted off three times (by the  S1  ∩ S2 ,  S1  ∩ S3 , and 
|
|
|
|	
|
| |
|
S2  ∩ S3 terms), and then counted once more (by the  S1  ∩ S2  ∩ S3 term).  The net effect is that x
|
|	
|
|
is counted just once. 

So we  can’t answer  the original question without knowing  the  sizes of  the various  intersections. 
Let’s suppose that there are: 

4  Math ­ EECS double majors 
3  Math ­ Physics double majors 
11  EECS ­ Physics double majors 
2 
triple majors 
Then  M ∩ E =  4 + 2,  M ∩ P =  3 + 2,  E ∩ P =  11 + 2, and  M ∩ E ∩ P =  2.  Plugging all this 
|
|
|
|
|
| 
|
|
into the formula gives: 
M ∪ E ∪ P = |M + E + P M ∩ E M ∩ P
|
| 
|
|
|
|
| − |
| − |
= 60 + 200 + 40 − 6 − 5 − 13 + 2 
= 278  

E ∩ P + M ∩ E ∩ P
| − |
|
|

|

6.2.1  Sequences with 42, 04, or 60 
In how many permutations of the set {0, 1, 2, . . . , 9} do either 4 and 2, 0 and 4, or 6 and 0 appear 
consecutively?  For example, none of these pairs appears in: 

(7, 2, 9, 5, 4, 1, 3, 8, 0, 6) 

The 06 at the end doesn’t count; we need 60.  On the other hand, both 04 and 60 appear consecu­
tively in this permutation: 

(7, 2, 5, 6, 0, 4, 3, 8, 1, 9) 

Course Notes, Week 9: Counting, I. 

17 

Let P42  be the set of all permutations in which 42 appears; deﬁne P60  and P04  similarly.  Thus, for 
example,  the permutation  above  is  contained  in both P60  and P04 .  In  these  terms, we’re  looking 
for the size of the set P42  ∪ P04  ∪ P60 . 
First, we must determine  the  sizes of  the  individual  sets,  such  as P60 .  We  can use  a  trick:  group 
the 6 and 0 together as a single symbol.  Then there is a natural bijection between permutations of 
{0, 1, 2, . . . 9} containing 6 and 0 consecutively and permutations of: 
{60, 1, 2, 3, 4, 5, 7, 8, 9} 

For example, the following two sequences correspond: 
↔ 
(7, 2, 5, 60, 4, 3, 8, 1, 9)
(7, 2, 5, 6, 0, 4, 3, 8, 1, 9) 
There  are  9!  permutations  of  the  set  containing  60,  so  |P60 |  =  9!   by  the Bijection Rule.  Similarly, 
P04 | =  P42 | =  9!  as well. 
|
|
Next,  we  must  determine  the  sizes  of  the  two­way  intersections,  such  as  P42  ∩ P60 .  Using  the 
grouping trick again, there is a bijection with permutations of the set: 
{42, 60, 1, 3, 5, 7, 8, 9} 
Thus,  P42   ∩ P60 = 8!.  Similarly,  P60  ∩ P04 = 8!  by a bijection with the set: 
| 
|
| 
|
{604, 1, 2, 3, 5, 7, 8, 9} 
And  P42   ∩ P04 =  8!  as well by a  similar argument.  Finally,  note  that  P60  ∩ P04  ∩ P42 =  7!  by a 
|
| 
|
|
bijection with the set: 
{6042, 1, 3, 5, 7, 8, 9} 

Plugging all this into the formula gives: 
P42  ∪ P04  ∪ P60 =  9!   +  9!   +  9!  − 8!  − 8!  − 8!  +  7! 
|
| 

6.3  Union of n Sets 

The size of a union of n sets is given by the following rule. 

Rule 9 (Inclusion­Exclusion). 

minus 
plus 
minus 
plus 

= 

|S1  ∪ S2  ∪ · · · ∪ S | 
n
the sum of the sizes of the individual sets 
the sizes of all two­way intersections 
the sizes of all three­way intersections 
the sizes of all four­way intersections 
the sizes of all ﬁve­way intersections, etc. 

There  are  various  ways  to  write  the  Inclusion­Exclusion  formula  in  mathematical  symbols,  but 
none  are particularly  clear,  so we’ve  just used words.  The  formulas  for unions  of  two  and  three 
sets are special cases of this general rule. 

18 

6.3.1  Counting Primes 

Course Notes, Week 9: Counting, I. 

How many of the numbers 1, 2, . . . , 100  are prime? One way to answer this question is to test each 
number up to 100 for primality and keep a count.  This requires considerable effort.  (Is 57 prime? 
How about 67?) 

Another approach is to use the Inclusion­Exclusion Principle. This requires one trick:  to determine 
the number of primes, we will ﬁrst count the number of non­primes. By the Sum Rule, we can then 
ﬁnd the number of primes by subtraction from 100.  This trick of “counting the complement” is a 
good one to remember. 

Reduction to a Union of Four Sets 

The set of non­primes  in  the range 1, . . . , 100  consists of  the set, C , of composite numbers  in  this 
range:  4, 6, 8, 9, . . . , 99, 100  and the number 1, which is neither prime nor composite. The main job 
is to determine the size of the set C of composite numbers.  For this purpose, deﬁne Am  to be the 
set of numbers in the range m +  1, . . . , 100  that are divisible by m: 
Am  ::=  {x ≤ 100  x > m and  (m x)}
|
| 

For example, A2  is all  the even numbers  from 4  to 100.  The  following Lemma will now allow us 
to compute the cardinality of C by using Inclusion­Exclusion for the union of four sets: 

Lemma 6.1. 

C =  A2  ∪ A3  ∪ A5  ∪ A7 . 

Proof.  We prove the two sets equal by showing that each contains the other. 
To show that A2  ∪ A3  ∪ A5  ∪ A7  ⊆ C , let n be an element of A2  ∪ A3  ∪ A5  ∪ A7 .  Then n  ∈ Am  for 
m = 2, 3, 5  or 7.  This implies that n is in the range 1, . . . , 100  and is composite because it has m as 
a factor. That is, n ∈ C . 
Conversely, to show that C  ⊆ A2  ∪ A3  ∪ A5  ∪ A7 , let n be an element of C .  Then n is a composite 
number in the range 1, . . . , 100. This means that n has at least two prime factors. Now if both prime 
factors are > 10, then their product would be a number > 100  which divided n, contradicting the 
fact that n < 100.  So n must have a prime factor ≤ 10.  But 2, 3, 5, and 7 are the only primes ≤ 10. 
This means that n is an element of A2 , A3 , A5 , or A7 , and so n ∈ A2  ∪ A3  ∪ A5  ∪ A7 . 

Computing the Cardinality of the Union 

Now  it’s  easy  to  ﬁnd  the  cardinality  of  each  set Am :  every mth  integer  is  divisible  by m,  so  the 
� 
� 
number of integers in the range 1, . . . , 100  that are divisible by m is simply �100/m�.  So 
100 
− 1,
m 
where the −1  arises because we deﬁned Am  to exclude m itself. This formula gives: 

Am | = 
|

Course Notes, Week 9: Counting, I.


19 

|A2 | 
|A3 | 
|A5 | 
|A7 | 

=  � 2  � − 1 =  49 
100
=  � 3  � − 1 =  32 
100
=  � 5  � − 1 =  19 
100
=  � 7  � − 1 =  13 
100

Notice  that  these  sets  A2 ,  A3 ,  A5 ,  and  A7  are  not  disjoint.  For  example,  6  is  in  both  A2  and  A3 . 
Since the sets intersect, we must use the Inclusion­Exclusion Principle: 

C | =  A2  ∪ A3  ∪ A5  ∪ A7
| 
|
|
=  |A2 +  A3 +  A5 +  A7
|
|
|
|
|
|
|
| − |
− |
A2  ∩ A3
A2  ∩ A5
| − |
A2  ∩ A7
A3  ∩ A5
A3  ∩ A7
A5  ∩ A7
| − |
| − |
| − |
+  A2  ∩ A3  ∩ A5 +  A2  ∩ A3  ∩ A7 +  A2  ∩ A5  ∩ A7 +  A3  ∩ A5  ∩ A7
|
|
|
|
|
|
|
|
− |
A2  ∩ A3  ∩ A5  ∩ A7
| 

|

There are a lot of terms here!  Fortunately, all of them are easy to evaluate.  For example,  A3  ∩ A7
|
|
is the number of multiples of 3 7   = 21  in the range 1 to 100, which is �100/21� = 4.  Substituting 
·
such values for all of the terms above gives: 
|C =49  +  32  +  19   +  13 
|
− 16  − 10  − 7 − 6 − 4 − 2 
+  3 +  2 +  1 +  0 
− 0 
=74 

This calculation shows that there are 74 composite numbers in the range 1 to 100. Since the number 
1 is neither composite nor prime, there are 100  − 74  − 1  = 25  primes in this range. 
At  this  point  it may  seem  that  checking  each  number  from  1  to  100  for  primality  and  keeping  a 
count of primes might have been easier than using Inclusion­Exclusion.  However,  the Inclusion­
Exclusion approach used here is asymptotically faster as the range of numbers grows large. 

