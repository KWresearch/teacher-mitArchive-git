The 4-Step Demand Model

Urban Transportation Planning
MIT Course 1.252j/11.380j
Fall 2002

Mikel Murga, MIT Research Associate
October 4 , 2002

Quantitative Methods

Urban Transportation Planning – Fall 2002

! The 4-Step Model
! Critique
! Integration of the analytical chain
! New Trends

Day 5

2

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Road flows in the 
Basque Country for 
a particular scenario

Day 5

3

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Road flows in the 
Basque Country for 
a particular scenario

Day 5

4

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Road flows in the 
Basque Country for 
a particular scenario

Day 5

5

4-Step Planning Model

Urban Transportation Planning – Fall 2002

View in downtown Bilbao:
volumes, I/C, speeds…
Day 5

6

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Viajes en TP por familia
por sección censal
4
2
0.4

BILBOBUS
METRO
Otros

Day 5

Modal  share among Subway, Buses and chartered buses

7

4-Step Planning Model

Urban Transportation Planning – Fall 2002

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"
"

"

"

Sube-Baja
2500

1250
625

suben
bajan
Línea 48

Day 5

5000
2500
1250
On-off counts per bus stop for all routes

8

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Viajeros por Ejes Viarios en BilboBus

15000

7500

1

Day 5

Aggregated bus flows along corridors

9

4-Step Planning Model

Urban Transportation Planning – Fall 2002

1
1

8
8

6
6

2
2

5
5

3
3

7
7

9
9

4
4

Viajeros entre Distritos
Viajeros entre Distritos

5000
5000

2500
2500

1250
1250

Nota: El Distrito 5 se ha dividido en dos (5 y 9) para separar el Casco Viejo de barrios más periféricos como San Adrián y La Peña
Nota: El Distrito 5 se ha dividido en dos (5 y 9) para separar el Casco Viejo de barrios más periféricos como San Adrián y La Peña

Day 5

The Overall View: A simplified O-D matrix

10

4-Step Planning Model

Urban Transportation Planning – Fall 2002

In a nutshell: every settlement, every dwelling, job center, 
road, no of lanes, posted speeds, signals, transit lines, 
stops, headways, commercial speeds…

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"

"
"

"

"

Sube-Baja
2500

1250
625

suben
bajan
Línea 48

5000

2500

1250

Day 5

11

4-Step Planning Model

Urban Transportation Planning – Fall 2002

Land-Use Scenarios: 
eg. New developments

Transport Scenarios: 
eg. New transit line

Policy Scenarios: eg. 
New parking scheme

Socio-economic data

Generation

Distribution

Modal Split

Assignment

Started in the 50´s 
to build the Interstate

Then,
predict and accommodate

The basic approach
remains unchanged today

12

Day 5

Urban Transportation Planning – Fall 2002
Why planning models are important?

Land-Use Scenarios: 
Land-Use Scenarios: 
Land-Use Scenarios: 
eg. New developments
eg. New developments
eg. New developments

Transport Scenarios: 
Transport Scenarios: 
Transport Scenarios: 
eg. New transit line
eg. New transit line
eg. New transit line

Policy Scenarios: eg. 
Policy Scenarios: eg. 
Policy Scenarios: eg. 
New parking scheme
New parking scheme
New parking scheme

Socio-economic data
Socio-economic data
Socio-economic data

Generation
Generation
Generation
Generation
Generation

Distribution
Distribution
Distribution
Distribution
Distribution

Modal Split
Modal Split
Modal Split
Modal Split
Modal Split

Assignment
Assignment
Assignment
Assignment
Assignment

Day 5

! Forecasts numbers can be 
easily used to kill a project or 
to keep it alive, even if it has 
no real merits
! Models often used as “black 
boxes”
! They can be easily 
manipulated to produce 
results fitting client’s wishes
! As few post-mortems are 
conducted, many are happy 
to predict the future

13

Use of Planning models

Urban Transportation Planning – Fall 2002

! Traditionally:
! Demand estimates per mode
! Explore future alternative land use-transport 
scenarios
! More and more:
! Short term policies: Detours, parking policies, 
street closings, modal split …
! Environmental impacts
! Impacts of ITS technologies
! Operational studies for “non-regular” days
! Adapting to today’s needs: congestion & 
demand management, plus, air-quality issues 
14

Day 5

The 4-Step Model

Urban Transportation Planning – Fall 2002

! Commercial packages:
! Trips
! Emme2
! Tranplan
! QRSII
! MinUTP
! Tp+
! Vissum
! TransCad
! ………

! From black boxes to 
script languages with 
open subroutines
! User-friendliness 
versus flexibility to 
model your own thing
! Bugs galore -> Direct 
link with programmers

“When using mathematics in modeling, if one cannot interpret the outcome in good,
plain English then the paper should be burnt and one should start again”  
Alfred Marshal, 19th century UK economist

Day 5

15

The 4-Step Model

Urban Transportation Planning – Fall 2002

! I don’t believe in models!
! … but everyone has a model 
in his mind
! Modeling just a mental 
abstraction
! Don’t be afraid to model a 
particular behavior, even if it 
is not in the books
! Models (and simulations) may 
become self-educating tools

Day 5

16

The 4-Step Model

Urban Transportation Planning – Fall 2002

"
"
""
""
"
""
"
"
"
"
"
"
"
""
"
"
"
""
"
"
"
" "
"""
"

"

"

"
"
"
"
"

"
"
"
""
"
"
"
"
""
""""
"
"
""
"
"
""
"
"
"
"
"
"
"
"
""
"
"
"
""
"
"
"
"

"
"

"

"

"
"

"
"
"

"
"
""""
"
"
"
"
"
""
"
"
"
""
""
"
"
"
"

"

"
"

"
"
"
"

"

"

"

"

"

"

"

"

"

" "
"

"

"
" "

"

"
"
"
"

"

"

"

"

"

"

"

"

"

"

"

"

"

"
"
"
"
"
"
"
"

"

"
"

"

"

"

"

"

"

"

"
"
"
"
"
"
""
"
"
"""
"
"
"
"
"
""
"
""
"
"
"
"
"
"
"
"
"
"
"
"
"
"
""
"
"
"
"
"
"
"
"
"
"
"
""
"
""
"
"
""
"
"
"
"
"
"
"
"
"

"

" "
"
"
""

"

"
"

"

"

"

"

! Basic questions:
! Modeling objective
! Area to be modeled
! Level of detail
! Availability and quality of data
! Trip purposes to be represented
! Transport modes to include
! Treatment of heavy vehicles
! ……………………………..

"

"

Day 5

! How do you avoid GI-GO?

17

Urban Transportation Planning – Fall 2002
The 4-Step Planning Model

Land-Use Scenarios: 
eg. New developments

Transport Scenarios: 
eg. New transit line

Policy Scenarios: eg. 
New parking scheme

Socio-economic data

Generation

Distribution

Modal Split

Assignment

What do you think?

Which steps are more
critical, more confusing,
more related to planning
or to operational studies?

Day 5

18

Urban Transportation Planning – Fall 2002
The 4-Step Model: Generation

! Generation:
! How many trips per family?1
! Surveys to establish:
! No of trips as a function of number of people per household, of 
number of cars, type of dwelling, residential area…
! Distribution among trip purposes
! Distribution between motorized and non-motorized
! Distribution between chained and un-chained trips
! Number of captive public transport users: e.g.: f (No of people 
per household vs no of automobiles in household)

1 Number of trips per person a quasi-constant

Day 5

19

Urban Transportation Planning – Fall 2002
The 4-Step Model: Generation

! Most important parameter: Number 
of members per dwelling unit

! Is trip generation sensitive to policy 
changes?:
! The total number of trips or just those 
at a given time?
! Or perhaps, just the trips made on a 
given mode?

! Trip purposes: HBW, HBO and NHB

Day 5

20

Urban Transportation Planning – Fall 2002
The 4-Step Model: Generation

! Generation: How many trips per family?

No of
People
Per family
1
1

2
2

3
3

4
4

Car trips in Bilbao
No of cars per family
1
2
1
2

0
0

0.1
0.1
0.2
0.2
0.4
0.4
0.6
0.6

1.2
1.2
1.4
1.4
1.6
1.6
1.8
1.8

2.5
2.5
2.6
2.6
3.3
3.3

3
3

3.3
3.3
4.1
4.1

Day 5

21

Urban Transportation Planning – Fall 2002
The 4-Step Model: Distribution

! Where will the generated trips go to? 
Generation #$Attraction (jobs, shops, 
schools, residences…)
! Travel impedance as a restraint:

! Travel impedance elements: time, distance, 
tolls, ramps, scenic value…

! Friction curves: f (time, distance, tolls…)

! Gravity model:  Tij = k (Pi*Aj )/Ifrict

Day 5

22

Urban Transportation Planning – Fall 2002
The 4-Step Model: Distribution

! Where will the generated trips go to?
! Internal vs External trips

! Do impedance function hold in time?

! Other origin-destination (o-d) matrices:
! From road counts
! From years past

! The Watts effect:
! More refined input data

Day 5

23

Urban Transportation Planning – Fall 2002
The 4-Step Model: Distribution

! Where will the generated trips go to?
! Internal vs External trips
! Internal trips, those whose origin and 
destination are confined into a city limit
! External trips, those whose destination is 
beyond city or town limits
! Why is it important to differentiate them?

Day 5

24

Urban Transportation Planning – Fall 2002
The 4-Step Model: Distribution

a
i
c
n
e
u
c
e
r
F

100%
90%
80%
70%
60%
50%
40%
30%
20%
10%
0%

Distancias en  viajes internos de 
residentes en Bilbao

Tiempos en  viajes internos de 
residentes en Bilbao

A pie
Bus
Coche
Tren

a
i
c
n
e
u
c
e
r
F

100%
90%
80%
70%
60%
50%
40%
30%
20%
10%
0%

A pie
Bus
Coche
Tren

Internal trips

1 3 5 7 9
kms

1
1

3
1

5
1

7
1

9
1

s
á
m

5

0
1

5
1

0
2

5
0
5
2
3
3
minutos

0
4

5
4

0
5

5
5

0
6

Distancias en  viajes externos de residentes 
en Bilbao

Tiempos en  viajes externos de residentes 
en Bilbao

a
i
c
n
e
u
c
e
r
F

100%
80%
60%
40%
20%
0%

Day 5

Trabajo
Estudios
Otros

a
i
c
n
e
u
c
e
r
F

100%
90%
80%
70%
60%
50%
40%
30%
20%
10%
0%

Trabajo
Estudios
Otros

External trips

1 3 5 7 9
kms

1
1

3
1

5
1

7
1

9
1

s
á
m

5

0
1

5
1

0
2

5
2

0
3

5
3

0
4

5
4

0
5

5
5

0
6

s
á
m

minutos

25

Urban Transportation Planning – Fall 2002
The 4-Step Model: Modal Split

! Modal Split:$ Which transport mode will they 
choose? How do we divide the total o-d matrix?

! Motorized vs Non-motorized trips
! Motorized:
! Automobile vs Transit
! Automobile: drivers vs passengers
! Transit: choice vs captive riders
! Exceptions from the idealized analytical flow:
! Captive riders case:
! They are inelastic versus transit improvements
! Their distribution stage is not necessarily the same as car drivers 
- Some destinations may become off-limits
! Non-motorized trips: walk and bike trips

26

Day 5

Urban Transportation Planning – Fall 2002
The 4-Step Model: Modal Split

! A Utility Function:
! Ui= ai+bi*IVTTi+ci*OVTTi+ di*COSTi
! ai= modal constant
! bi = In-Vehicle-Travel Time coefficient 
! ci = Out-Vehicle-Travel Time coefficient
! di = Cost (or ticket) coefficient 
relationships among coefficients??
! For each modal option and for every 
o-d pair, there will be a utility function

Day 5

27

Urban Transportation Planning – Fall 2002
The 4-Step Model: Modal Split

! Modal Split:
! Stated-Preferences: Revealed and 
Declared
! Calibrated utility functions with 
weight factors:  value of time1, 
penalty for waiting time…
! The modal constant
! Logit curves (or “S” curves):
! P(k) = e Uk / sum( eUx)
! Sequential split or nested logit

Day 5

Value of time – Analysis and…  Evaluation?

28

Urban Transportation Planning – Fall 2002
The 4-Step Model: Modal Split

Day 5

29

Urban Transportation Planning – Fall 2002
The 4-Step Model: Assignment

! Assignment$ Which route will they take?

! The shortest?  The fastest?  The least costly route? The 
more scenic route?
! As more cars choose a route, what happens?
! How do we represent mounting congestion?

! Analytical options:
! All or Nothing (AOL)  Winner gets it all
! Capacity restraint  How to incorporate mounting congestion
! Equilibrium  A very rational universe out there

Day 5

30

Urban Transportation Planning – Fall 2002
The 4-Step Model: Assignment

! Assignment:
! Critical pathing:
! Capacity restraint
! Equilibrium, etc.
! … but we´re dealing with human nature
! Volume-delay curves
! V/C versus peak spreading
! Tolls
! Time segment of the O-D matrix to assign

Day 5

31

Urban Transportation Planning – Fall 2002
The 4-Step Model: Assignment

! Volume-Delay curves – or how to represent 
growing congestion:
! The BPR story: Nothing like a good and simple 
formula to explain it all
Tc= Tff (1 + alpha (i/C))beta

Even for intersection delay?

Day 5

32

Urban Transportation Planning – Fall 2002
The 4-Step Model: Assignment

! Assignment period:
! 24 hour assignment as 
ADT (Average Daily 
Traffic)
! Morning and evening 
rush-hour, off-peak…
! Time variations 
associated to each trip 
purpose

Day 5

33

The 4-Step Model

! Feedback Loops:
! Speed vs Volumes
! Transit vs Road
! How far or how long?
! Trip generation sensitive 
to ease of travel?
! Convergence criteria
! Coherence with basic 
scenarios

Urban Transportation Planning – Fall 2002

Land-Use Scenarios: 
Land-Use Scenarios: 
Land-Use Scenarios: 
eg. New developments
eg. New developments
eg. New developments

Transport Scenarios: 
Transport Scenarios: 
Transport Scenarios: 
eg. New transit line
eg. New transit line
eg. New transit line

Policy Scenarios: eg. 
Policy Scenarios: eg. 
Policy Scenarios: eg. 
New parking scheme
New parking scheme
New parking scheme

Socio-economic data
Socio-economic data
Socio-economic data

Generation
Generation
Generation
Generation
Generation

Distribution
Distribution
Distribution
Distribution
Distribution

Modal Split
Modal Split
Modal Split
Modal Split
Modal Split

Assignment
Assignment
Assignment
Assignment
Assignment

Day 5

34

The 4-Step Model

Urban Transportation Planning – Fall 2002

! To know more about the analytical process:
! “Modelling Transport” by Ortuzar, J. de D. and 
Willumsen, L.G., John Wiley, NY, 3rd Edition,2001
! “Travel Estimation Techniques for Urban 
Planning” NCHRP Report 365, 1998
! User manuals of most commercial packages

Day 5

35

Urban Transportation Planning – Fall 2002
Critique of the 4-step Method

! A tool created for a different goal: new road 
infrastructure. Today, focus on system management
! Peak spreading, and, induced demand
! Trip substitution? Impact of Information technologies?
! Description of “average, ideal conditions”
! Forecasting: Do basic parameters remain constant? 
Backcasting?
! Underlying theme: Individual choices
! Areas needing more insight:
! Automobile ownership models  (basic variable)
! Auto-occupancy (basic variable)
! Goods transport, taxis, goods distribution…

Day 5

36

Questions to ask

Urban Transportation Planning – Fall 2002

! As a user of 4-step models results, you 
could raise questions such as:
! Right scale?  Discretized enough?
! Calibration?
! Validation? Backcastingbefore forecasting
! Sensitivity analyses of results?
! Modes considered?
! Is it sensitive to policies being discussed?

Day 5

37

Traffic Models

Urban Transportation Planning – Fall 2002

! To verify and incorporate (and even 
feedback) the output from the 4-step 
planning model
! 4-Step model: a rather crude 
approximation of
! road or urban streets capacity
! Interaction, such as queues blocking an 
intersection
! Traffic speed (and resulting impacts)

Day 5

38

Traffic Models

Urban Transportation Planning – Fall 2002

! Highway Capacity Manual:
! Hand-calculations $ HCS
! Macroscopic Models:
! Representation of Platoons
! Microscopic Models
! Individual vehicles are analyzed

Data availability + Computer power

Day 5

39

Urban Transportation Planning – Fall 2002
Microscopic Traffic Models

! From research tools (MITSIM for the 
Big Dig) towards daily practice
! Commercial packages:
! CORSIM – Traf-Netsim
! WATSim
! Paramics
! VISSIM
! Aimsun2
! …………

Day 5

40

Urban Transportation Planning – Fall 2002
Microscopic Traffic Models

Day 5

41

Urban Transportation Planning – Fall 2002
Microscopic Traffic Models

Day 5

42

Urban Transportation Planning – Fall 2002
Microscopic Traffic Models

Used as well for environmental impact studies

Day 5

43

Urban Transportation Planning – Fall 2002
Microscopic Traffic Models

Equally suited for transit…

Day 5

44

Urban Transportation Planning – Fall 2002
Integration of the Analytical Chain

! An automatic chain of events
! Sequence:
! GIS $ Planning Model $ Traffic Models $ GIS 
$ Postprocessors (environmental studies)
! Or any combination of the above
! Critical analysis and judgement at every 
stage

Day 5

45

New Trends

Urban Transportation Planning – Fall 2002

! Operational Studies: Life under congestion
! The higher the saturation, the higher the 
probability of an incident
! The higher the saturation, the longer it will 
take to bring the system back to normal 
conditions, after an incident

! But the 4-step planning model describes 
average un-eventful days out there!

Day 5

46

New Trends

Urban Transportation Planning – Fall 2002

! Operational Studies: Life under congestion
! From real-time vehicle counts to refined o-d 
matrices for incident management
! Drivers with better information: Does the 
system behave differently?
! What role for Intelligent Transport Systems? 
Tactical tools or strategic approaches?

Day 5

47

Urban Transportation Planning – Fall 2002
The 4-step planning model results

Red, V/C >.9
Yellow, V/C=.7-.9

Day 5

48

Planning vs Operational Studies

Urban Transportation Planning – Fall 2002

! Not all red colors are created equal
! The planning red: proximity to capacity
! The field red: actual operational instabilities
! The challenge is how to predict their relationship 
and take them into account for planning purposes

Day 5

49

Urban Transportation Planning – Fall 2002
IDAS: A new analytical approach

! Developed in the Oak Ridge National 
Lab and the FHWA in USA – by 
Cambridge Systematics
! The pioneering work by Mitretek in 
Seattle, WA
! Goal: To be able to deploy ITS more 
on fact than on faith

Day 5

50

New Trends

Urban Transportation Planning – Fall 2002

! Operational Studies: Life under congestion
! The IDAS approach
! How do we measure ITS costs and benefits?
! Should we incorporate ITS into standard planning 
procedures?
! Or, should we resign ourselves to see ITS tools as a 
last minute tactical solution to be implemented by 
practical men, not planners?

Day 5

51

Urban Transportation Planning – Fall 2002
IDAS: A new analytical approach

! It starts from the results of traditional 4-step 
planning packages
! It attempts to reproduce some of the 
algorithms contained in conventional planning 
packages 
! Its essence is an evolving database on ITS 
costs and benefits

! It focuses on “problem days” not on the idyllic 
“average” days depicted by regular planning 
packages

Day 5

52

IDAS approach

Urban Transportation Planning – Fall 2002

! IDAS as a new approach:
! A must to analyze future scenarios which show 
growing saturation, as:
! Operational improvements become critical
! Integrated planning AND operational policies become 
compulsory
! Global indicators become essential
! A unique approach to deal with the main threat:
! Road incidents – a harsh everyday reality far away from 
the ideal “average” planning day

Day 5

53

New Trends

Urban Transportation Planning – Fall 2002

! From trip-based modeling towards an 
activity-based approach:
! Travel decisions are activity based
! Understanding activity behavior is 
fundamental, rather than travel behavior
! Focus on household dynamics, spatial and 
temporal interrelationships between trips

Day 5

54

New Trends

Urban Transportation Planning – Fall 2002

! Activity-based approach:
! Travel is derived from the demand for activity 
participation
! Sequences of patterns of behavior
! Scheduling of household activities in time and space
! TRANSIMS (Los Alamos National Lab):
! The goal is to replace current transport paradigm
! Already applied in Portland, Or (See Bowman and Ben-
Akiva 1997 paper on “Activity-based forecasting”)

Day 5

55

A Closing Thought

Urban Transportation Planning – Fall 2002

The McNamara fallacy1:
• The first step is to measure whatever can be easily 
measured. This is OK as far as it goes
• The second step is to disregard that which can't be easily 
measured or to give it an arbitrary quantitative value. This 
is artificial and misleading
• The third step is to presume that what can't be measured 
easily really isn't important. This is blindness
• The fourth step is to say that what can't be easily 
measured really doesn't exist. This is suicide

1 by Charles Handy “The Empty Raincoat”

Day 5

56

